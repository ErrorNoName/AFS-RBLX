## Résumé

Le **ScriptBlox API** est une interface RESTful publique destinée à interroger la vaste bibliothèque de scripts Lua partagés par la communauté Roblox sur ScriptBlox.com. Elle expose principalement quatre endpoints :

* **Fetch** (`/api/script/fetch`) pour récupérer des listes paginées de scripts avec filtres ([ScriptBlox][1]).
* **Search** (`/api/script/search`) pour effectuer des recherches ciblées via un paramètre `q` obligatoire ([ScriptBlox][2]).
* **Individual** (`/api/script/:script` et `/api/script/raw/:script`) pour obtenir les métadonnées ou le code brut d’un script spécifique ([ScriptBlox][3]).
* **Trending** (`/api/script/trending`) pour lister les scripts les plus populaires du moment ([ScriptBlox][4]).

Chaque appel renvoie du JSON structuré (`result.scripts`, `script`, etc.) et peut être utilisé en Lua via `game:HttpGet` ou `HttpService:GetAsync` puis `JSONDecode` pour peupler une UI ou un executor ([ScriptBlox][1], [Roblox Creator Hub][5]). Depuis avril 2025, des mécanismes de migration obligent à remplacer l’ancien paramètre `filters` par des paramètres explicites (`mode`, `verified`, `sortBy`, `order`) et à simplifier la structure des tags et des images ([ScriptBlox][6]).

---

## 1. Introduction et prérequis

Le ScriptBlox API permet à tout executor ou hub de scripts de :

1. **Afficher** la liste des scripts récents ou filtrés.
2. **Rechercher** des scripts par mot-clé et filtres.
3. **Charger** les détails et le code source brute d’un script.
4. **Découvrir** les scripts en vogue.

**Prérequis** :

* Connexion réseau active (Wi-Fi ou Ethernet) pour effectuer des requêtes HTTP ([ScriptBlox][7]).
* Attribution visible “Powered by ScriptBlox.com” exigée sur toute intégration ([ScriptBlox][7]).
* Activation de `HttpService` dans votre expérience Roblox pour utiliser `GetAsync`/`JSONDecode` ([Roblox Creator Hub][5]).

---

## 2. Endpoints principaux

### 2.1 `/api/script/fetch` – Récupérer des scripts

* **Fonction** : renvoie les scripts “à la une” ou filtrés.
* **Paramètres** (optionnels) :

  * `page` (number, défaut 1)
  * `max` (≤ 20, défaut 20)
  * `mode` (`free`|`paid`)
  * `patched`, `key`, `universal`, `verified` (`1`/`0`)
  * `sortBy` (`views` | `likeCount` | `createdAt` | `updatedAt` | `dislikeCount`)
  * `order` (`asc`|`desc`, défaut `desc`) ([ScriptBlox][1]).
* **Réponse** :

  ````json
  {
    "result":{
      "totalPages":number,
      "nextPage":number,
      "max":number,
      "scripts":[ /* tableau d’objets script */ ]
    }
  }
  ``` :contentReference[oaicite:10]{index=10}.  
  ````

### 2.2 `/api/script/search` – Recherche avancée

* **Fonction** : similaire à `fetch` mais avec `q` (**requis**, chaîne de recherche) ([ScriptBlox][2]).
* **Paramètres** : `q`, `page`, `max`, `mode`, `patched`, `key`, `universal`, `verified`, `sortBy`, `order`, `strict` (`true`/`false`) ([ScriptBlox][2]).
* **Réponse** :

  ````json
  {
    "result":{
      "totalPages":number,
      "scripts":[ /* scripts correspondant à la recherche */ ]
    }
  }
  ``` :contentReference[oaicite:13]{index=13}.
  ````

### 2.3 `/api/script/:script` et `/api/script/raw/:script` – Détails et code brut

* **Fonction** :

  * `GET /api/script/:script` renvoie les métadonnées complètes d’un script ([ScriptBlox][3]).
  * `GET /api/script/raw/:script` renvoie uniquement le code Lua brut du script ([ScriptBlox][3]).
* **Paramètre** : `script` (identifiant du script, chaîne).
* **Réponse exemple** pour les métadonnées :

  ````json
  {
    "script":{
      "_id":"string",
      "title":"string",
      "game":{"_id":"string","gameId":number,"name":"string","imageUrl":"string"},
      "features":"string",
      "tags":["string",…],
      "script":"string",
      "owner":{…},
      "image":"string","slug":"string","verified":boolean, … 
    }
  }
  ``` :contentReference[oaicite:16]{index=16}.
  ````

### 2.4 `/api/script/trending` – Scripts en vogue

* **Fonction** : liste les scripts avec le plus d’interactions récentes.
* **Paramètre** : `max` (nombre ≤ 20, défaut 20).
* **Réponse** :

  ````json
  {
    "result":{
      "max":number,
      "scripts":[ /* scripts trending */ ]
    }
  }
  ``` :contentReference[oaicite:17]{index=17}.
  ````

---

## 3. Structure des réponses

Chaque objet script retourné contient au minimum :

* `_id`, `title`, `slug`
* `game` (id, nom, imageUrl)
* `verified`, `key`, `isUniversal`, `isPatched`
* `views`, `scriptType`, `createdAt`, `updatedAt`
* `image`, et dans `/raw`, la propriété `script` avec le code Lua ([ScriptBlox][1]).

Les résultats sont paginés via `totalPages` et `nextPage`. En cas d’erreur, le JSON renvoie `{ "message": "string" }`.

---

## 4. Exemple d’intégration en Lua

Voici un snippet minimal pour **afficher** les titres et slugs\*\* \*\*:

```lua
local HttpService = game:GetService("HttpService")
local url = "https://scriptblox.com/api/script/fetch?page=1&max=10"
local success, result = pcall(function()
    return HttpService:GetAsync(url)
end)
if success then
    local data = HttpService:JSONDecode(result)
    for _, s in ipairs(data.result.scripts) do
        print("Titre:", s.title, "– Slug:", s.slug)
    end
else
    warn("Erreur lors de la récupération :", result)
end
```

Cet exemple utilise `GetAsync` et `JSONDecode` du `HttpService` pour traiter la réponse JSON ([ScriptBlox][1], [Roblox Creator Hub][5]).

---

## 5. Migration et évolutions récentes

Depuis avril 2025, l’ancien paramètre `filters` :

* est **déprécié** ; utilisez `mode`, `verified`, `sortBy`, `order` à la place ([ScriptBlox][6]).
* les **tags** sont passés d’objets à un simple tableau de chaînes (`["tag1","tag2"]`) ([ScriptBlox][6]).
* les **images** des scripts sont maintenant dans la propriété directe `image` et non plus `game.imageUrl` ([ScriptBlox][6]).

Une **période de grâce** permet d’ajouter `legacy_filters=true`, `legacy_tags=true` ou `legacy_img=true` pour la rétrocompatibilité ([ScriptBlox][6]).

---

## 6. Bonnes pratiques et limites

* **Gestion d’erreurs** : toujours encapsuler `GetAsync` dans un `pcall` et vérifier `message` en réponse.
* **Pagination** : exploiter `totalPages` et `nextPage` pour parcourir l’intégralité du catalogue.
* **Attribution** : afficher “Powered by ScriptBlox.com” pour se conformer aux conditions d’utilisation ([ScriptBlox][7]).
* **Performances** : limiter le `max` à 20 et regrouper les requêtes pour ne pas surcharger le réseau.

---

## 7. Ressources et références

* ScriptBlox API – Getting Started ([ScriptBlox][7])
* ScriptBlox API – Fetch Scripts ([ScriptBlox][1])
* ScriptBlox API – Fetch Individual ([ScriptBlox][3])
* ScriptBlox API – Search Scripts ([ScriptBlox][2])
* ScriptBlox API – Trending ([ScriptBlox][4])
* ScriptBlox API – Migration Guide ([ScriptBlox][6])
* NuGet: ScriptBloxAPI .NET Client ([NuGet][8])
* Roblox HttpService Documentation ([Roblox Creator Hub][5])
* ScriptBlox Homepage ([ScriptBlox][9])

[1]: https://scriptblox.com/docs/scripts/fetch "Fetch scripts - ScriptBlox API"
[2]: https://scriptblox.com/docs/scripts/search "Search scripts - ScriptBlox API"
[3]: https://scriptblox.com/docs/scripts/individual "Fetch individual scripts - ScriptBlox API"
[4]: https://scriptblox.com/docs/scripts/trending "Trending - ScriptBlox API"
[5]: https://create.roblox.com/docs/reference/engine/classes/HttpService?utm_source=chatgpt.com "HttpService | Documentation - Roblox Creator Hub"
[6]: https://scriptblox.com/docs/migration "Migration - ScriptBlox API"
[7]: https://scriptblox.com/docs "Getting Started - ScriptBlox API"
[8]: https://www.nuget.org/packages/ScriptBloxAPI "
        NuGet Gallery
        \| ScriptBloxAPI 6.2.0
    "
[9]: https://scriptblox.com/?utm_source=chatgpt.com "ScriptBlox: Search best Roblox Scripts available in community."
